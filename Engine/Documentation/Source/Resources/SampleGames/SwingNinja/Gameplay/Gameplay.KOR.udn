INTSourceChangelist:2591123
Availability: Docs
Title:게임플레이
Crumbs:%ROOT%, Resources, Resources/SampleGames/SwingNinja
Description:스윙 닌자 게임의 게임플레이 셋업에 대해 다루는 문서입니다.

[TOC(start:2 end:2)]

[REGION:fullwidth]

## 개요

스윙 닌자는 횡스크롤 물리기반 게임입니다. 그 정상 작동을 위해 필요한 핵심 요소는 두 가지입니다:

* 횡스크롤 게임 방식
* 갈고리에 쓸 물리 셋업

이 모든 부분이 **MyCharacter_Test** 라는 이름의 캐릭터 블루프린트에 셋업되어 있습니다.

## 횡스크롤

횡스크롤 셋업을 만들기 위해, 횡스크롤 블루프린트 프로젝트를 기반으로 시작했습니다. 횡스크롤 방식에는 두 가지 중요한 부분이 있는데, 이동과 카메라 셋업입니다.

### 이동

캐릭터 이동은 횡스크롤 블루프린트 템플릿 셋업의 수정 버전입니다. 그 셋업의 기본 MoveRight 이벤트가 카메라에 모션을 적용하기 위한 기반으로 사용되었습니다. 이 셋업에서도 매우 유사한 작업을 하지만, 현재 매달려 있는 스윙 상태인지에 따라 실제 입력을 사용할 것인지 분기시킵니다. 아래는 이동 제어를 위한 망입니다.

[REGION:lightbox]
[![](SwingMovement.png)](SwingMovement.png)
[/REGION]
[REGION:caption]
클릭하거나 우클릭 - 다른 이름으로 저장하여 크게 볼 수 있습니다.
[/REGION]

스윙 제어를 담당하는 접힌 노드 망이 있는 것을 볼 수 있습니다. 여기서는 갈고리의 위치를 구해 그 갈고리와 캐릭터 사이의 벡터를 만듭니다. 여기에 회전력을 더해 캐릭터가 해당 지점을 중심으로 회전하도록 하며, 최대 회전 속도에 도달할 때까지 가속시킵니다. 이 노드를 더블클릭하면 그 망이 표시됩니다:

[REGION:lightbox]
[![](SwingBehaviorNetwork.png)](SwingBehaviorNetwork.png)
[/REGION]
[REGION:caption]
클릭하거나 우클릭 - 다른 이름으로 저장하여 크게 볼 수 있습니다.
[/REGION]



### 카메라

카메라는 플레이어의 이동을 따라가면서 캐릭터의 전체적인 속도를 고려하여 줌 레벨을 제어하여 횡스크롤 게임 방식을 유지하도록 셋업되어 있습니다. 이런 식으로 플레이어가 빠르게 움직일수록 카메라 줌 레벨도 멀어지게 되어, 플레이어의 돌진에 따른 장애물 시야 확보를 할 수 있게 됩니다.

[REGION:lightbox]
[![](CameraMovement.png)](CameraMovement.png)
[/REGION]
[REGION:caption]
클릭하거나 우클릭 - 다른 이름으로 저장하여 크게 볼 수 있습니다.
[/REGION]




## 갈고리

갈고리(grapple hook) 셋업은 꽤나 단순하며, 캐릭터 캡슐에 피직스 시뮬레이션을 켜는 것을 기반으로 합니다. 이 작업이 이루어지고 나면 Character Movement Component (캐릭터 무브먼트 컴포넌트)를 끄고, 캐릭터를 갈고리에 붙이는 Physics Constraint (피직스 컨스트레인트)를 구성합니다. 갈고리 위치는 캐릭터에서의 선 검사(line trace)를 통해 이루어집니다. 피직스 컨스트레인트는 한 축에 대해서만 회전하도록 설정, 횡스크롤 방식을 유지하도록 합니다.



갈고리에 매달려 흔들리는 것(스윙)은 캐릭터 자체의 상태로 구성되는 것이기에, 그 상태를 사용해서 받는 입력을 분기시킬 수 있습니다. 기본적으로 플레이어가 스윙 상태라면, 입력은 무시되고 스윙 계산을 피직스 캡슐에 물려줍니다. 그렇지 않은 경우, 입력은 정상 계산되어 플레이어가 뛰어다닐 수 있습니다.









[/REGION]