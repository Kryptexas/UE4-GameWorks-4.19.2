INTSourceChangelist:2438523
Availability:Public
Title:アニメーションとサウンドの再生
Crumbs: %ROOT%, Engine, Engine/Matinee, Engine/Matinee/HowTo
Description: スケルタルメッシュをプラットフォームへジャンプさせるアニメートする方法およびマチネでサウンドを適用する方法。 


---
以下の手順では、**スケルタルメッシュ** にアニメーションと動きを適用することでキャラクタをプラットフォーム上にジャンプさせます。さらに **サウンド トラック** を使用して BGM とサウンドも追加します。 

[INCLUDE:Engine/Matinee/HowTo/MHT_1#projectstart]

[OBJECT:TopicList]
	[PARAM:title]
		マチネ アクタとプロップを追加する
	[/PARAM]
	[PARAM:description]
	この手順では、**マチネ アクタ** と **スケルタルメッシュ アクタ** を追加し、キャラクタが上にジャンプして乗るプラットフォームを作成します。  
	[/PARAM]
[/OBJECT]

1. **ツールバー** メニューから **[マチネ]** を選択し、**[Add Matinee]** ボタンをクリックします。 

	![](Engine\Matinee\HowTo\MHT_1\MHT1_AddMatinee.png)(w:720)

1. **マチネ** の undo 警告メッセージが表示されたら **Continue** ボタンをクリックします。 

	![](Engine\Matinee\HowTo\MHT_1\MHT1_MatineeWarning.png)

1. **マチネ エディタ** ウィンドウが開きます。 

	[REGION:lightbox]
	[![](Engine\Matinee\HowTo\MHT_1\MHT1_MatineeOpen.png)(w:640)](Engine\Matinee\HowTo\MHT_1\MHT1_MatineeOpen.png)
	[/REGION]

	_クリックしてフルサイズで表示_

1. **マチネ** を最小化し、**「Game/Character」** フォルダの **コンテンツ ブラウザ** で **HeroTPP Skeletal Mesh** アセットをドラッグしてレベルにドロップします。 

	![](MHT7_AddSkeleton.png)

1. **HeroTPP** の **[詳細]** パネルで **Transform** にある **Location** の **X, Y, Z** をそれぞれ **-610.0**、**-690.0**、**125.0** に設定します。 

	![](MHT7_HeroDetails.png)

1. レベル内でテンプレート テキストの上の小さなボックス ブラシをつかみ、それを **スケルタルメッシュ** の前に移動します。 

	![](MHT7_MoveBoxBrush.png)

1. **ブラシ設定** の中のボックス ブラシの **[詳細]** パネルで、**X** と **Y** の値を **250** に、**Z** の値を **1400.0** に設定します。 

	![](MHT7_BoxDetails.png)

	_ボックスは以下のようになるはずです。_

	![](MHT7_ExampleBox.png)


[OBJECT:TopicList]
	[PARAM:title]
		アクタをマチネに追加し、トラックを追加する
	[/PARAM]
	[PARAM:description]
	このステップでは **マチネ** に **HeroTPP** を追加し、シーケンスに使用するトラックを追加します。 
	[/PARAM]
[/OBJECT]

1. **ワールド アウトライナー** から **MatineActor** を選択し、**[Open Matinee]** ボタンをクリックします。 

	![](MHT7_OpenMatineeActor.png)

1. **マチネ** を最小化し、次に **HeroTPP** を選択し、**マチネ** を再度開きます。トラック ウィンドウで **右クリック** し、**Add New Skeletal Group** を選択します。 

	![](MHT7_AddSkeletalGroup.png)

	_この新規グループに名前を付けます。この例では、**HeroTPP** とします。_

1. **Group Name** 上で **右クリック** してメニューから **Add New Sound Track** を選択します。 

	![](MHT7_AddNewSoundTrack.png)

1. 前の手順を繰り返し、もう 1 つ **Sound Track** を追加し、2 つ存在するようにします。 

1. **5.00** で終了マーカをつかみ、それを **12.00** まで移動して **マチネ** を延長します。 

	![](MHT7_MoveEndMarker.png)


[OBJECT:TopicList]
	[PARAM:title]
		動きとアニメーションを追加する
	[/PARAM]
	[PARAM:description]
	この手順では、ボックスの上にジャンプして乗るキャラクタの動きとアニメーションをセットアップします。 
	[/PARAM]
[/OBJECT]

1. **マチネ** を開いた状態で **Movement** トラック上でクリックして、**タイムバー** を **3.00** に移動し、**Enter** を押してキーフレームを追加します。 

	![](MHT7_MovementKey2.png)

1. 上記の手順を繰り返し、**4.50**、**6.00**、**7.00**、および **8.00** にキーフレームを追加します。 

	![](MHT7_MovementKeysAdded.png)

1. **Movement** トラックの 2 つめのキーフレームをクリックして、**マチネ** を最小化します。次に **HeroTPP** の **[詳細]** パネルで **Z** の **Location** を **135** に設定します。 

	![](MHT7_MoveDetailsKey2.png)

1. **マチネ** に戻り、**Movement** の 3 つめのキーフレームをクリックし、**マチネ** を最小化し、**Location** の **Y** を **-674** に、**Z** を **385** にそれぞれ設定します。 

	![](MHT7_MoveDetailsKey3.png)

1. **マチネ** に戻り、**Movement** の 4 つめのキーフレームをクリックし、**マチネ** を最小化し、**Location** の **Y** を **-622.53** に、**Z** を **804.640** にそれぞれ設定します。 

	![](MHT7_MoveDetailsKey4.png)

1. **マチネ** に戻り、**Movement** の 5 つめのキーフレームをクリックし、**マチネ** を最小化し、**Location** の **Y** を **-561.0** に、**Z** を **872.0** にそれぞれ設定します。 

	![](MHT7_MoveDetailsKey5.png)

1. **マチネ** に戻り、**Movement** の 6 つめのキーフレームをクリックし、**マチネ** を最小化し、**Location** の **Y** を **-502.0** に、**Z** を **847.0** にそれぞれ設定します。 

	![](MHT7_MoveDetailsKey6.png)

1. 最後のキーフレームを **Movement** トラックで選択したままの状態で、レベルビューポートで、**HeroTPP** アクタはプラットフォームの上に立っているはずです。 

	![](MHT7_FinalMovementKeyframe.png)

	_アクタがプラットフォームの上に立っていない場合、移動して立たせることができます (また、上のボックスでスナップサイズを調整できます)。_

1. **タイムバー** を移動して **0.00** に戻し、**Anim** トラックを選択し、**[Enter]** キーを押してキーフレームを追加します。次に表示されるメニューから **Idle** を選択します。 

	![](MHT7_AnimKey1.png)

	_レベル ビューポートを見ると、**HeroTPP** アクタは、**アイドル** ポーズ状態になっています。これは、**マチネ** を開始するためにアニメーションを使用するように指定したためです。_ 

1. **タイムバー** を **2.50** に移動し、**Enter** を押します。次に、メニューから **Jump_Start** を選択します。 

1. **Jump_Start** キーフレームの **2.50** で **右クリック** し、**Set Play Rate** を選択し、値を **0.23** に設定します。 

	![](MHT7_JumpAnimAdded.png)

1. **タイムバー** を **4.50** に移動し、**Enter** を押します。次に、メニューから **Jump_Start** を選択します。 

	![](MHT7_AnimKey3.png)

	_**Jump_Loop** アニメーションを追加可能ですが、キャラクタは昇り続けることになります。**Jump_Start** からのフレームを使用するほうが見た目がよくなります。_

1. **Jump_Start** キーフレームの **4.50** で **右クリック** し、**Set Start Offset** を選択し、値を **5** に設定します。 

	![](MHT7_AnimKey4.png)

	_上記のようにすることで、フレーム 0 の代わりにフレーム 5 でアニメーションを開始することを指示しました。_

	![](MHT7_AnimKey5.png)(w:720)

	_キャラクタのポーズが変更され、通常のかがみ込んだ **Jump_Start** ポーズを使用していないことがわかります。_

1. **タイムバー** を **8.00** に移動し、**Enter** を押します。次に、メニューから **Jump_End** を選択します。 

1. **タイムバー** を **8.30** までスクラブし、**Enter** を押します。次に、メニューから **Idle** を選択します。 

	![](MHT7_AnimKey6.png)

1. **Idle** キーフレームの **8.30** で **右クリック** し、**Set Time** を選択し、それを **8.20** に設定します。 

1. **8.20** に移動した **Idle** キーフレームで **右クリック** し、**Set Looping** を選択します。 

	![](MHT7_AnimKey7.png)

	_シーケンスの最後のより暗くなっている部分は、アニメーションがループするように設定されていることを示しています。_


[OBJECT:TopicList]
	[PARAM:title]
		サウンドを追加し、マチネを終了する
	[/PARAM]
	[PARAM:description]
	この手順ではサウンドトラックを使用してサウンドを追加し、シーケンスを仕上げます。 
	[/PARAM]
[/OBJECT]

1. **[マチネ]** ウィンドウを最小化し、**「Game/Audio」** フォルダ内の **コンテンツ ブラウザ** で **Explosion01** アセットをクリックします。 

1. **[マチネ]** ウィンドウに戻り、**タイムバー** を **2.50** の目盛に移動し、**Enter** を押します。 

	![](MHT7_Sound1.png)(w:780)

	_サウンド アセットを **Sound Track** に追加するためには、**Sound Wave** または **Sound Cue** アセットを **コンテンツ ブラウザ** で必ず選択してください。_

1. 新規に追加したサウンド アセットのキーフレーム上で **右クリック** して、**Set Sound Volume** を選択し、それを **1.5** に設定します。 

1. 前の手順を繰り返しますが、**右クリック** し、**Set Sound Pitch** を選択し、それを **0.5** に設定します。 

	![](MHT7_Sound2.png)

	_トラックのバーを見ると、このサウンドのボリュームが 1.5 まで大きくなり、ピッチは 0.5 まで減っていることがわかります。_

1. 他の **Sound Track** をクリックします。次に、**Game/Audio** の **コンテンツ ブラウザ** で **Start_Music_Cue** アセットを選択します。 

1. **[マチネ]** ウィンドウに戻り、**タイムバー** を **0.00** の目盛に移動し、**Enter** を押してその音楽を追加します。 

	![](MHT7_Sound3.png)(w:780)

1. 音楽の **Sound Track** の **[詳細]** パネルで **[Continue Sound on Matinee End]** チェックボックスにチェックを入れます。 

	![](MHT7_Sound4.png)

	_上記の操作により、12 秒の **マチネ** シーケンスが終わると、音楽が継続して再生されます (そうでなければ、音楽は突然終了します)。_ 

1. **マチネ** を閉じます。**ワールド アウトライナー** で、**Matinee Actor** を選択します。 

1. **Play** の **[詳細]** パネルで **[Play on Level Load]** チェックボックスにチェックを入れます。 

	![](MHT7_MatineeFinished.png)

1. メイン ツールバーで **Play** ボタンをクリックしてエディタで再生します。 

	![](MHT7_Gif.gif)(convert:false)

	_これで **HeroTPP** アクタが、爆発のサウンド エフェクトと音楽の再生に合わせてボックスの上にジャンプするようになります。_

	_複数のカメラ アングル、FOV、ポスト プロセス エフェクト、スローモーション トラックなど、より洗練された独自のものを作るために **Director Track** を適用することが可能です。_



